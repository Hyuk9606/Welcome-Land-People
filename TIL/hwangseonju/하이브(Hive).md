# 하이브(Hive)

<br>

### 1️⃣ Hive란?

- [데이터 웨어하우징](https://bomwo.cc/posts/Datawarehouse/)용 솔루션
- 하둡 에코시스템 중에서 데이터를 모델링하고 프로세싱하는 경우 가장 많이 사용
- RDB의 데이터베이스, 테이블과 같은 형태로 HDFS에 저장된 데이터의 구조를 정의하는 방법 제공
- SQL과 유사한 HiveQL 쿼리 이용하여 데이터 조회 방법 제공
- 기존의 RDB와 다르게 미리 스키마를 정의하고 틀에 맞게 데이터를 입력하는 것이 아닌, 데이터를 저장하고 거기에 스키마를 입히는 것이 가장 큰 특징! → 메타스토어

<br>

### 2️⃣ 구성요소

**UI**

- 사용자가 쿼리 및 기타 작업을 시스템에 제출하는 사용자 인터페이스
- CLI, Beeline, JDBC

**Driver**

- 쿼리를 입력받고 작업 처리
- 사용자 세션을 구하고, JDBC/ODBC 인터페이스 API 제공

**Compiler**

- 메타 스토어를 참고하여 쿼리 구문을 분석하고 실행계획 생성

**Metastore**

- DB, 테이블, 파이션의 정보 저장

**Execution Engine**

- 컴파일러에 의해 생성된 실행 계획을 실행

<br>

### 3️⃣ 실행순서

![Untitled](./img/하이브(Hive)/Untitled.png)

1. 사용자가 제출한 쿼리를 드라이버가 컴파일러에 요청하여 메타스토어 정보를 이용하여 처리에 적합한 형태로 컴파일
2. 컴파일된 쿼리를 Execution Engine으로 실행
3. 리소스 메니저가 클러스터의 자원을 활용하여 실행
4. 실행 중 사용하는 원천 데이터는 HDFS등의 저장장치를 이용
5. 실행결과를 사용자에게 반환

<br>

### 4️⃣ 버**전별 특징**

**Hive 1.0**

- sql을 이용한 맵리듀스 처리
- 파일 데이터의 논리적 표현
- 빅데이터의 배치 처리 목표

**Hive 2.0**

- LLAP(Live Long and Process) 구조 추가
- Spark 지원 강화
- CBO 강화
- HPLSQL 추가

**Hive 3.0**

- 롤을 이용한 작업 상태 관리
- 트랜잭션 처리 강화
- 구체화 뷰 추가
- 쿼리 결과를 캐싱하여 더 빠른 속도로 작업 가능
- 테이블 정보 관리 DB 추가

<br>

📚 **References**

- [https://spidyweb.tistory.com/238](https://spidyweb.tistory.com/238)